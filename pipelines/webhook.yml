resources:
  # see https://docs.microsoft.com/en-us/azure/devops/pipelines/process/resources?view=azure-devops&tabs=schema#define-a-webhooks-resource
  # for setup instructions
  webhooks:
    - webhook: gitHubWebHook
      connection: GitHubWebHook
      filters:
      - path: action
        value: CREATED
      #  - path: repositoryName      
      #    value: maven-releases     
steps:
- task: PowerShell@2
  inputs:
    targetType: 'inline'
    script: |
      Write-Host "Triggered via webhook!"
      
      # common properties
      Write-Host "Repo name is ${{ parameters.gitHubWebHook.repository.name }}"
      
      # properties for code scanning alerts
      Write-Host "Code scanning properties"
      Write-Host "Alert URL is ${{ parameters.gitHubWebHook.alert.html_url }}"
      Write-Host "Alert rule.name is ${{ parameters.gitHubWebHook.alert.rule.name }}"
      Write-Host "Alert rule.description is ${{ parameters.gitHubWebHook.alert.rule.description }}"
      Write-Host "Alert rule.full_description is ${{ parameters.gitHubWebHook.alert.rule.full_description }}"

      # properties for dependabot alerts
      Write-Host "Dependabot properties"
      Write-Host "Alert package ${{ parameters.gitHubWebHook.alert.affected_package_name }}" 
      Write-Host "Alert range ${{ parameters.gitHubWebHook.alert.affected_range }}"
      Write-Host "Alert fixed in ${{ parameters.gitHubWebHook.alert.fixed_in }}"
      Write-Host "Alert CVE ${{ parameters.gitHubWebHook.alert.external_identifier }}"
